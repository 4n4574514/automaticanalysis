<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of aas_getimages</title>
  <meta name="keywords" content="aas_getimages">
  <meta name="description" content="Automatic Analysis function to retrieve image lists">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2003 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../index.html">Home</a> &gt;  <a href="#">aa_engine</a> &gt; aas_getimages.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../index.html"><img alt="<" border="0" src="../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for ./aa_engine&nbsp;<img alt=">" border="0" src="../right.png"></a></td></tr></table>-->

<h1>aas_getimages
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>Automatic Analysis function to retrieve image lists</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>function [imagefns]=aas_getimages(aap,i,j,prefixes,minimg,maximg) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre class="comment"> Automatic Analysis function to retrieve image lists
 function [imagefns]=aas_getimages(aap,i,j,prefixes,minimg,maximg)
  select images from subject i session j
  only images beginning with 'prefixes' are returned
  either provide range using minimg, maximg (0,inf for all) or provide
   single parameter to get one image
 Rhodri Cusack MRC CBU Cambridge, Nov 2005</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="aas_getsubjpath.html" class="code" title="function [subjpath]=aas_getsubjpath(aap,i)">aas_getsubjpath</a>	Automatic analysis - get subject path</li></ul>
This function is called by:
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="aa_checkformissingscans.html" class="code" title="function [aap]=aa_checkformissingscans(studyroot)">aa_checkformissingscans</a>	Automatic analysis - check for missing scans</li></ul>
<!-- crossreference -->


<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre>0001 <span class="comment">% Automatic Analysis function to retrieve image lists</span>
0002 <span class="comment">% function [imagefns]=aas_getimages(aap,i,j,prefixes,minimg,maximg)</span>
0003 <span class="comment">%  select images from subject i session j</span>
0004 <span class="comment">%  only images beginning with 'prefixes' are returned</span>
0005 <span class="comment">%  either provide range using minimg, maximg (0,inf for all) or provide</span>
0006 <span class="comment">%   single parameter to get one image</span>
0007 <span class="comment">% Rhodri Cusack MRC CBU Cambridge, Nov 2005</span>
0008 
0009 <a name="_sub0" href="#_subfunctions" class="code">function [imagefns]=aas_getimages(aap,i,j,prefixes,minimg,maximg)</a>
0010 
0011 <span class="keyword">if</span> (~exist(<span class="string">'minimg'</span>,<span class="string">'var'</span>))
0012     minimg=0;
0013     maximg=inf;
0014 <span class="keyword">else</span>
0015     <span class="keyword">if</span> (~exist(<span class="string">'maximg'</span>,<span class="string">'var'</span>)), maximg=minimg; <span class="keyword">end</span>;
0016 <span class="keyword">end</span>;
0017 
0018 sesspath=fullfile(<a href="aas_getsubjpath.html" class="code" title="function [subjpath]=aas_getsubjpath(aap,i)">aas_getsubjpath</a>(aap,i),aap.acq_details.sessions{j});
0019 
0020 <span class="keyword">if</span> (aap.directory_conventions.selectechonumbers)
0021     allimages=dir(fullfile(sesspath,sprintf(<span class="string">'%s%s*-%02d.nii'</span>,prefixes,aap.directory_conventions.rawdataafterconversionprefix,aap.acq_details.sessions_echonumbers(j))));
0022 <span class="keyword">else</span>
0023     allimages=dir(fullfile(sesspath,sprintf(<span class="string">'%s%s*.nii'</span>,prefixes,aap.directory_conventions.rawdataafterconversionprefix)));
0024 <span class="keyword">end</span>;
0025 
0026 imagefns=[];
0027 pth=sesspath;
0028 fns=[];
0029 <span class="keyword">for</span> i=1:length(allimages)
0030     [t r]=strtok(allimages(i).name,<span class="string">'-'</span>); <span class="comment">% start of series num</span>
0031     [t r]=strtok(r,<span class="string">'-'</span>); <span class="comment">% start of imgnum</span>
0032     t=strtok(r,<span class="string">'-'</span>);
0033     imgnum=str2num(t);
0034     <span class="keyword">if</span> (imgnum&gt;=minimg &amp; imgnum&lt;=maximg)
0035         imagefns=strvcat(imagefns,fullfile(sesspath,allimages(i).name));
0036         fns=strvcat(fns,allimages(i).name);    
0037     <span class="keyword">end</span>;
0038 <span class="keyword">end</span>;</pre></div>
<hr><address>Generated on Fri 31-Aug-2007 16:39:50 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/">m2html</a></strong> &copy; 2003</address>
</body>
</html>